<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consolidating inForm data • phenoptrReports</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Consolidating inForm data">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">phenoptrReports</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/consolidation.html">Consolidating inForm data</a>
    </li>
    <li>
      <a href="../articles/analysis.html">Analyzing inForm data</a>
    </li>
    <li>
      <a href="../articles/unmixing_quality_report.html">Unmixing quality report</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="https://github.com/akoyabio/phenoptrReports">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Consolidating inForm data</h1>
                        <h4 class="author">Kent Johnson</h4>
            
            <h4 class="date">2019-05-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/akoyabio/phenoptrReports/blob/master/vignettes/consolidation.Rmd"><code>vignettes/consolidation.Rmd</code></a></small>
      <div class="hidden name"><code>consolidation.Rmd</code></div>

    </div>

    
    
<div id="data-consolidation-overview" class="section level2">
<h2 class="hasAnchor">
<a href="#data-consolidation-overview" class="anchor"></a>Data consolidation overview</h2>
<p>The first step in a <code>phenoptrReports</code> data analysis is data consolidation.</p>
<p>The consolidation step combines the output from multiple inForm projects into a single consolidated data file and creates columns for each individual phenotype. The inputs to this step are merged cell seg data files from multiple inForm projects. The output is a consolidated data file and a summary report for each file.</p>
<p>NOTE: The consolidation step will fail if the Slide IDs and Cell IDs in the merge files do not exactly agree. This can happen, for example, if</p>
<ul>
<li>the projects use different cell segmentation parameters</li>
<li>different fields were included in the merge step</li>
<li>a region of interest or disinterest was drawn in the merge step</li>
</ul>
<p>Run the consolidation step even if your data comes from a single inForm project. This creates a data file in the format that the analysis step uses.</p>
</div>
<div id="data-requirements" class="section level2">
<h2 class="hasAnchor">
<a href="#data-requirements" class="anchor"></a>Data requirements</h2>
<div id="merged-cell-seg-data" class="section level4">
<h4 class="hasAnchor">
<a href="#merged-cell-seg-data" class="anchor"></a>Merged cell seg data</h4>
<p>The primary source data for <code>phenoptrReports</code> is one or more merged cell seg data files created in the inForm Review/Merge tab. You may use multiple merge files from multiple inForm projects with different phenotypes. The Slide ID and Cell ID fields in multiple merge files must agree exactly.</p>
</div>
<div id="tissue-segmentation" class="section level4">
<h4 class="hasAnchor">
<a href="#tissue-segmentation" class="anchor"></a>Tissue segmentation</h4>
<p>inForm projects used with <code>phenoptrReports</code> must include a tissue segmentation step.</p>
</div>
<div id="phenotypes" class="section level4">
<h4 class="hasAnchor">
<a href="#phenotypes" class="anchor"></a>Phenotypes</h4>
<p>The names of positive phenotypes used with <code>phenoptrReports</code> must end with “+”, for example “CD8+” or “FoxP3+”. Negative and “Other” phenotype names should not end in “+”.</p>
</div>
</div>
<div id="detailed-steps" class="section level2">
<h2 class="hasAnchor">
<a href="#detailed-steps" class="anchor"></a>Detailed steps</h2>
<div id="choose-consolidate-and-summarize-from-the-rstudio-addins-menu" class="section level4">
<h4 class="hasAnchor">
<a href="#choose-consolidate-and-summarize-from-the-rstudio-addins-menu" class="anchor"></a>Choose “Consolidate and summarize” from the RStudio Addins menu</h4>
<p>Thus will open the consolidation app.</p>
<p><img src="figures/Consolidate_addin.png"></p>
</div>
<div id="select-input-files" class="section level4">
<h4 class="hasAnchor">
<a href="#select-input-files" class="anchor"></a>Select input files</h4>
<p>Click the “Browse Input” button in the “Select merge data files” section of the GUI. Use the file selection dialog to select your inForm merge data files. If the files are in multiple directories, click the Browse button multiple times to select them.</p>
<p><img src="figures/Select_merge_files.PNG"></p>
</div>
<div id="select-output-directory" class="section level4">
<h4 class="hasAnchor">
<a href="#select-output-directory" class="anchor"></a>Select output directory</h4>
<p>Click the “Browse Output” button in the “Select output directory” section of the GUI. Use the directory selection dialog to create a new directory to contain the output files.</p>
<p><img src="figures/Select_output_directory.PNG"></p>
</div>
<div id="process-files" class="section level4">
<h4 class="hasAnchor">
<a href="#process-files" class="anchor"></a>Process files</h4>
<p>Click the “Process Files” button to start processing of the selected files.</p>
<p><img src="figures/Process_files.png"></p>
<p>A small progress meter will open to show progress. Any errors will be shown in the RStudio Console pane.</p>
<p><img src="figures/Processing_please_wait.png"></p>
</div>
<div id="view-summary-reports" class="section level4">
<h4 class="hasAnchor">
<a href="#view-summary-reports" class="anchor"></a>View summary reports</h4>
<p>When processing completes, the output directory will contain several files:</p>
<ul>
<li>
<code>Consolidated_data.txt</code> - A data file containing the consolidated results</li>
<li>
<code>Consolidated_data.html</code> - A report containing summary information about the consolidated data</li>
<li>Summary reports for each merge file that contributed to the result</li>
</ul>
<p>The consolidated data file is used for the actual analysis. The summary reports contain an overview of the data, including</p>
<ul>
<li>number of fields per slide</li>
<li>number of cells of each phenotype per slide</li>
<li>visualizations of the combination phenotypes present in the data</li>
</ul>
</div>
<div id="next-analysis" class="section level4">
<h4 class="hasAnchor">
<a href="#next-analysis" class="anchor"></a>Next: Analysis</h4>
<p>Continue to the <a href="analysis.html">next tutorial</a> to learn how to complete your analysis.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#data-consolidation-overview">Data consolidation overview</a></li>
      <li>
<a href="#data-requirements">Data requirements</a><ul class="nav nav-pills nav-stacked">
<li><a href="#merged-cell-seg-data">Merged cell seg data</a></li>
      <li><a href="#tissue-segmentation">Tissue segmentation</a></li>
      <li><a href="#phenotypes">Phenotypes</a></li>
      </ul>
</li>
      <li>
<a href="#detailed-steps">Detailed steps</a><ul class="nav nav-pills nav-stacked">
<li><a href="#choose-consolidate-and-summarize-from-the-rstudio-addins-menu">Choose “Consolidate and summarize” from the RStudio Addins menu</a></li>
      <li><a href="#select-input-files">Select input files</a></li>
      <li><a href="#select-output-directory">Select output directory</a></li>
      <li><a href="#process-files">Process files</a></li>
      <li><a href="#view-summary-reports">View summary reports</a></li>
      <li><a href="#next-analysis">Next: Analysis</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kent S Johnson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
